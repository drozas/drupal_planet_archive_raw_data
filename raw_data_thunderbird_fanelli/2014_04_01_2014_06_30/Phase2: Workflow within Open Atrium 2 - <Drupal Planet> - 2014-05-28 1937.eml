X-Mozilla-Status: 0041
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                
Date: Wed, 28 May 2014 17:37:21 +0000
Message-Id: <http://drupal.org/planet/rss.xml#Wed, 28 May 2014 17:37:21 +0000@localhost.localdomain>
From: <Drupal Planet>
MIME-Version: 1.0
Subject: Phase2: Workflow within Open Atrium 2
Content-Transfer-Encoding: 8bit
Content-Base: http://www.phase2technology.com/blog/workflow-within-open-atrium-2/?utm_source=rss&utm_medium=rss&utm_campaign=workflow-within-open-atrium-2
Content-Type: text/html; charset=UTF-8

<html>
  <head>
    <title>Phase2: Workflow within Open Atrium 2</title>
    <base href="http://www.phase2technology.com/blog/workflow-within-open-atrium-2/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=workflow-within-open-atrium-2">
  </head>
  <body id="msgFeedSummaryBody" selected="false">
    <p><a href="http://www.phase2technology.com/wp-content/uploads/2014/01/atrium-logo-1.png"><img class="alignright size-full wp-image-6462" alt="atrium-logo (1)" src="http://www.phase2technology.com/wp-content/uploads/2014/01/atrium-logo-1.png" width="300" height="82" /></a></p>
<p>A key requirement in most organizations is a content approval workflow.  The typical Drupal solution uses the <a title="Workbench moderation" href="http://drupal.org/project/workbench_moderation">Workbench Moderation</a> module. However, the Workbench Moderation module only allows you to create a single site-wide workflow.  What if you need different workflows in different Open Atrium spaces, or between different content types?  The solution is the new <a title="Open Atrium workbench" href="http://drupal.org/project/oa_workbench">Open Atrium Workbench</a> module!</p>
<p>The Open Atrium Workbench module, along with several dependent modules, was a collaboration between Phase2 (srjosh and myself) and the Community (dsnopek).  It allows you to define multiple workflow &#8220;profiles&#8221; and apply them to content types within Open Atrium Spaces and Sections.  It also allows you to specify the Groups and/or Teams who are allowed to moderate content through the workflow.</p>
<h2>Workbench Moderation Profiles</h2>
<p><a href="http://www.phase2technology.com/wp-content/uploads/2014/05/OA2_Workflow-3.png"><img class="alignright  wp-image-7301" style="border: 1px solid black;" alt="OA2_Workflow-3" src="http://www.phase2technology.com/wp-content/uploads/2014/05/OA2_Workflow-3.png" width="456" height="270" /></a>A workflow &#8220;profile&#8221; is a collection of States and Transitions.  A &#8220;State&#8221; represents where in the workflow a specific piece of content is, such as &#8220;Draft&#8221;, &#8220;Needs Review&#8221;, &#8220;Published&#8221;, etc.  A &#8220;Transition&#8221; is the act of moving between two states. Typically a Transition can only be made by a specific set of users with proper permissions.  For example, only members of a specific Working Group might be allowed to approve content, or only members of the Marketing team allowed to Publish content.</p>
<p>The Workbench Moderation module allows you to create these States and Transitions, but applies them globally across the entire site.  The new <a title="Workbench Moderation Profile" href="http://drupal.org/sandbox/srjosh/2172925">Workbench Moderation Profile</a> module (currently a sandbox) creates a new entity-type for storing workflow profiles.  The States and Transitions are still created globally by Workbench Moderation, but the actual collection of these being used for a specific workflow are controlled by the profile entity.</p>
<p>Workbench Moderation Profiles is very generic and doesn&#8217;t care exactly how these profiles are applied.  Submodules to support Organic Groups and Content Types are provided.  Hooks are available for further control.  The Open Atrium Workbench module uses these hooks to provide Space-specific and Section-specific workflow profiles.</p>
<h2>Turning it all on</h2>
<p>To add workflow to Open Atrium, download and install the <a title="Open Atrium workbench" href="http://drupal.org/project/oa_workbench">Open Atrium Workbench</a> module and all it&#8217;s dependencies.  There are several patches needed to Workbench Moderation documented in the oa_workbench.make file.  Eventually these will get committed to Workbench Moderation and much of the Profile sandbox will be incorporated directly.</p>
<p>Once all of the modules are enabled, the various Drupal permissions and Organic Groups (OG) permissions need to be set.  Permissions in Workbench Moderation are a bit backwards from the norm:  submodules *revoke* access rather than *grant* access.  Typically this means you will set the Drupal Workbench Moderation permissions (including View Unpublished content) to be allowed for all authenticated users, then use OG permissions to restrict to Members and/or Space Admins, then optionally use OA permissions to restrict to Groups/Teams.</p>
<p><a href="http://www.phase2technology.com/wp-content/uploads/2014/05/OA2-Workflow-Content.png"><img class="alignright  wp-image-7307" style="border: 1px solid black;" alt="OA2 Workflow Content" src="http://www.phase2technology.com/wp-content/uploads/2014/05/OA2-Workflow-Content.png" width="515" height="257" /></a>After enabling permissions, you next need to enable Moderation of Revisions on the specific content types that you want to use workflow.  When using Open Atrium, enabling Moderation on a content type will not turn on the workflow features until the Space itself enables a Profile.  Typically this means you will enable Moderation on many content types, such as Document Pages, Events, etc.  In most cases, moderation will *not* be used on Discussion Posts since those are usually ad-hoc discussions that do not require approvals.</p>
<p><img class="alignright size-full wp-image-7302" style="border: 1px solid black;" alt="OA2_Workflow_Creation-2" src="http://www.phase2technology.com/wp-content/uploads/2014/05/OA2_Workflow_Creation-2.png" width="328" height="217" /></p>
<p>Finally, the last step it to create your custom Workbench Profile containing the transitions you wish to include, then enable this workflow Profile for your Space or Section.  For Spaces, the workflow profile is set within the Config/Workbench Moderation page.  For Sections, the workflow profile is set by editing the Section node and setting the profile field.</p>
<p>To limit transitions to Groups or Teams, enable the oa_workbench_access module (included with oa_workbench).  To allow transitions to be scheduled automatically in the future, download and enable the <a title="Workbench Moderation Scheduled Transitions" href="http://drupal.org/sandbox/srjosh/2191231">Workbench Moderation Scheduled Transitions</a> module (also a sandbox).</p>
<h2>How it works</h2>
<p>Once Open Atrium Workbench is configured, creating new content within a Section will display the normal Workbench Moderation messages panel.  This panel provides information about what State the document is in and allows options for moving to a different state if you are approved to make that transition.</p>
<p><a href="http://www.phase2technology.com/wp-content/uploads/2014/05/OA2_Workflow_messages-3.png"><img class="alignright size-full wp-image-7304" style="border: 1px solid black;" alt="OA2_Workflow_messages-3" src="http://www.phase2technology.com/wp-content/uploads/2014/05/OA2_Workflow_messages-3.png" width="335" height="129" /></a>For example, a Member creates a new content Draft.  Once they are happy with the draft, they move it to the &#8220;Needs Review&#8221; state.  Somebody authorized to review the document visits their &#8220;My Workbench&#8221; page from their User Badge dropdown menu and goes to the &#8220;Needs Review&#8221; tab to see all of the content awaiting their approval.  After reviewing the document, they can either Reject the document, sending it back to the Draft state, or they can approve the document, sending it to the Published state.  Only the users authorized to publish the document will see the Published option in the workbench panel.</p>
<p>Once content is published, a new draft can still be made.  Workbench Moderation supports having one revision of content published while a different revision is in the draft state.  The new draft will only replace the currently published revision once it is approved and published via the workflow.</p>
<h2>See you at DrupalCon Austin!</h2>
<p>For more detailed information on using Open Atrium Workbench, watch my <a title="Workflow in Open Atrium video" href="https://vimeo.com/96231001">hands-on demo webinar</a>.  If you are coming to <a href="https://austin2014.drupal.org/">DrupalCon Austin</a>, stop by the Phase2 booth for a demo, or schedule a demo to discussion your specific organizational needs.  Or just come to our booth and say &#8220;Hi&#8221; and tell me about the cool and interesting ways you are using Open Atrium 2 in your organization.</p>
<p>While I&#8217;ve been using the default publishing approval workflow as my example, each organization has different workflow needs.  The workflow profile used for publishing documents is quite different from the workflow used to manage tasks or issues.  The workflow used in a private section (if any) is likely different than the workflow used in a public section.  Open Atrium supports all of these different cases in a systematic and easy-to-use way, consistent with users familiar with the Workbench Moderation module.  This functionality makes Open Atrium a key solution in the Enterprise Collaboration space on par with many non-Open-Source systems.</p>
  </body>
</html>

