X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                
Date: Thu, 20 Feb 2014 23:55:25 +0000
Message-Id: <http://drupal.org/planet/rss.xml#Thu, 20 Feb 2014 23:55:25 +0000@localhost.localdomain>
From: <Drupal Planet>
MIME-Version: 1.0
Subject: Propeople Blog: How to Master Contextual Links On Your Drupal Website
Content-Transfer-Encoding: 8bit
Content-Base: http://wearepropeople.com/blog/how-to-master-contextual-links-on-your-drupal-website
Content-Type: text/html; charset=UTF-8

<html>
  <head>
    <title>Propeople Blog: How to Master Contextual Links On Your Drupal Website</title>
    <base href="http://wearepropeople.com/blog/how-to-master-contextual-links-on-your-drupal-website">
  </head>
  <body id="msgFeedSummaryBody" selected="false">
    <div id="comment-wrapper-nid-1407"></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p dir="ltr" id="docs-internal-guid--606669f-5355-ea3b-7c84-79585c94b143" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">While developing </span><a href="/clients" style="text-decoration:none;"><span style="font-size:16px;font-family:Arial;color:#1155cc;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:underline;vertical-align:baseline;">Drupal websites</span></a><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">, I have been faced with the problem of adding custom contextual links to different elements like: taxonomy terms displayed as rendered entities, blocks created with Ctools plugins, custom blocks and other.</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">Contextual links are links attached to elements such as nodes, blocks, views displays and others. When you hover on a specific region, a gear image appears. Upon clicking it, the image shows the list of contextual links. You can see an example below. </span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p style="text-align: center;"><img alt="" height="256px;" src="https://lh6.googleusercontent.com/rLnlkFsQDli-XtdUVv7HD6CU6NBiHPWmn0wiUPK1E3661N4Fm57c8-LKbwuZu_LrVZtu2qFRsiwkt8YRBEIj379oHt16CJ4OKbelnLOY6pmc-lLPHP22sRFZgg" style="border: 0px solid transparent" width="367px;" /></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">Some modules provide contextual links that allow users to edit views, nodes, taxonomies and other elements, but there are situations when contextual links need to be created in a custom implementation.</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">Add a Custom Contextual Link to the Taxonomy Term View</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">In my case, I have a view that shows Taxonomy terms from the Service Category vocabulary as Rendered entities, without fields. </span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p style="text-align: center;"><img alt="" height="185px;" src="https://lh4.googleusercontent.com/mMTf5Q3FoRFsGsV50BgMUbKKgW_lMO53KzZM1JGiyrsujeE7YwNc_nNiFuEc5F4yhWgIQMvxB_j9m3cYWLoeKUg_nO8L-J65d5gFgvJCb7_jIqNRw3KQSX5E5g" style="border: 0px solid transparent" width="372px;" /></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">For each term, a contextual link should be added to the page where the term information can be edited, and the link would allow privileged users access to that page. This task can be accomplished using </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:italic;font-variant:normal;text-decoration:none;vertical-align:baseline;">template_preprocess_taxonomy_term(</span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">) to edit variables that will be used in the template file (taxonomy-term.tpl.php or taxonomy-term--service_category.tpl.php) and </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:italic;font-variant:normal;text-decoration:none;vertical-align:baseline;">hook_contextual_links_view_alter(). </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">In the preprocess function, the contextual link element can be added in the $title_suffix array.</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:15px;font-family:Arial;color:#274e13;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;"><script src="https://gist.github.com/jeqq/33ab35ec8c7157ef696a.js"></script></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">In </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:italic;font-variant:normal;text-decoration:none;vertical-align:baseline;">hook_contextual_links_view_alter() </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">are the altered contextual links elements before they are rendered. In this case, a new link is added.</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:15px;font-family:Arial;color:#274e13;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;"><script src="https://gist.github.com/jeqq/cf154ac1a6fec31a972c.js"></script></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">An important thing is that a class should be added for the region wrapper that includes contextual links. This class is </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:italic;font-variant:normal;text-decoration:none;vertical-align:baseline;">contextual-links-region, </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">and it makes it possible to show the contextual links region when you hover on the gear icon. </span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:15px;font-family:Arial;color:#274e13;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;"><script src="https://gist.github.com/jeqq/86acea35c54a1c0f3a57.js"></script></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">As a result, the taxonomy term entities will be displayed with a contextual link that will allow users that have </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:italic;font-variant:normal;text-decoration:none;vertical-align:baseline;">administer taxonomy </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">permission to access the term edit page.</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p style="text-align: center;"><img alt="" height="152px;" src="https://lh4.googleusercontent.com/YCBJ00YTBIVStdQ5JgpKWMsQUY2p9niz4lKGmxWOuPZYXrL5IIJu28L0H1tLosdmLR7UYAiCGCqmmjQa84TcLZPG5Uch3HPalS3au6k3jNyaWSnAJB5ECEWoFw" style="border: 0px solid transparent" width="714px;" /></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:bold;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">Custom Contextual Links as Render Elements</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">Contextual links can be added to elements like blocks using a renderable array. For example:</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:15px;font-family:Arial;color:#274e13;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;"><script src="https://gist.github.com/jeqq/dfa0c8ccc231af981bf7.js"></script></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">Theme function in the example is used to add a template where the wrapper with the </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:italic;font-variant:normal;text-decoration:none;vertical-align:baseline;">contextual-links-region </span><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">class will be added:</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:15px;font-family:Arial;color:#274e13;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;"><script src="https://gist.github.com/jeqq/53921c38c6cbd80cc087.js"></script></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">And the content of the template file:</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><br /><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:15px;font-family:Arial;color:#274e13;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;"><script src="https://gist.github.com/jeqq/6b9aaa88b2e4d65de454.js"></script></span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">Finally, the result will be a block in which content is wrapped with a contextual link region. Clicking on the gear icon will display the link to the vocabulary edit page.</span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p style="text-align: center;"><img alt="" height="135px;" src="https://lh6.googleusercontent.com/wsUnXVsS1lRJ_tFXdbCATqTm22pGS1IuF_WyhN9iywKalRim0Hy4z6Gy3kpRz-xIr0F3deFw3f_rL69oC4udrh5SK90uHNUAbw5FlgqC9jGBhzt2c63OEJ0LQA" style="border: 0px solid transparent" width="304px;" /></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">You can find more info here: </span><a href="https://drupal.org/documentation/modules/contextual" style="text-decoration:none;"><span style="font-size:16px;font-family:Arial;color:#1155cc;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:underline;vertical-align:baseline;">https://drupal.org/documentation/modules/contextual</span></a><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;"> . Please post any comments below. And make sure to subscribe to our mailing list to receive our </span><a href="http://feeds.feedburner.com/propeople" style="text-decoration:none;"><span style="font-size:16px;font-family:Arial;color:#1155cc;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:underline;vertical-align:baseline;">blog feed</span></a><span style="font-size:16px;font-family:Arial;color:#000000;background-color:transparent;font-weight:normal;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;">. </span></p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p><p dir="ltr" style="line-height:1.15;margin-top:0pt;margin-bottom:0pt;"> </p></div></div></div><div class="field field-name-field-tags field-type-taxonomy-term-reference field-label-above"><div class="field-label">Tags:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="/tags/drupal" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Drupal</a></div><div class="field-item odd"><a href="/tags/development" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Development</a></div><div class="field-item even"><a href="/tags/contextual-links" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">contextual links</a></div></div></div><div class="field field-name-field-drupal-planet field-type-taxonomy-term-reference field-label-above"><div class="field-label">Check this option to include this post in Planet Drupal aggregator:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="/drupal/planet" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">planet</a></div></div></div><div class="field field-name-field-topics field-type-taxonomy-term-reference field-label-above"><div class="field-label">Topics:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="/topics/tech-development" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Tech &amp; Development</a></div></div></div>
  </body>
</html>

