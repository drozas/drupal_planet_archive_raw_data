X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                
Date: Wed, 25 Dec 2013 06:00:00 +0000
Message-Id: <http://drupal.org/planet/rss.xml#Wed, 25 Dec 2013 06:00:00 +0000@localhost.localdomain>
From: <Drupal Planet>
MIME-Version: 1.0
Subject: Modules Unraveled: 089 Migrate in Core with Moshe, Melissa, Mike and Chx - Modules Unraveled Podcast
Content-Transfer-Encoding: 8bit
Content-Base: http://modulesunraveled.com/podcast/089-migrate-core-moshe-melissa-mike-and-chx-modules-unraveled-podcast
Content-Type: text/html; charset=UTF-8

<html>
  <head>
    <title>Modules Unraveled: 089 Migrate in Core with Moshe, Melissa, Mike and Chx - Modules Unraveled Podcast</title>
    <base href="http://modulesunraveled.com/podcast/089-migrate-core-moshe-melissa-mike-and-chx-modules-unraveled-podcast">
  </head>
  <body id="msgFeedSummaryBody" selected="false">
    <div class="field field-name-field-image field-type-image field-label-hidden view-mode-rss"><div class="field-items"><figure class="clearfix field-item even"><img typeof="foaf:Image" class="image-style-podcast-default" src="http://modulesunraveled.com/sites/default/files/styles/podcast_default/public/podcast/image/Moshe%2C%20Melissa%2C%20Mike%20%26%20Chx_0.png?itok=_ACLKWi7" width="300" height="108" alt="Photo of Moshe, Melissa, Mike &amp; Chx" /></figure></div></div><span class="submitted-by">Published: Wed, 12/25/13</span><div class="field field-name-field-podcast-file field-type-file field-label-hidden view-mode-rss"><div class="field-items"><div class="field-item even"><div class="mediaelement-audio"><audio  src="http://traffic.libsyn.com/modulesunraveled/089_Migrate_in_Core_with_Moshe_Melissa_Mike_and_Chx_-_Modules_Unraveled_Podcast.mp3" class="mediaelement-formatter-identifier-1387959986-0" controls="controls" ></audio><div class="mediaelement-download-link"><a href="http://traffic.libsyn.com/modulesunraveled/089_Migrate_in_Core_with_Moshe_Melissa_Mike_and_Chx_-_Modules_Unraveled_Podcast.mp3">Download this episode</a></div></div></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-rss"><div class="field-items"><div class="field-item even" property="content:encoded"><h2>Migrate in Core!</h2>
<ul><li>Why was the Migrate module chosen to get into core?</li>
</ul><p>This has been discussed for a very, very long time. The problem with the upgrade path is it runs Drupal 8 code against a Drupal 7 database so a lot of APIs need to be re-implemented in a more restricted fashion but obviously no one is too thrilled to waste time on code that runs essentially once per site at most so we tried to reuse as much code as we can with often unsatisfactory results. Code you’d think will work against a D7 database might turn out to work against a D7 <em>test</em> database but not the real ones.</p>
<ul><li>How did this get into core even though Drupal is “frozen”?</li>
</ul><p>Well, ask Alex Pott. He raised the idea at DrupalCon Prague. You should remember Drupal 7 was held back by the upgrade path by about half a year. Decoupling the ready levels of any sort of data upgrade path and release is certainly a wise idea. Realizing some part of Drupal is broken beyond recognition and making a smart decision on how to solve the problem is something we love Alex for.</p>
<ul><li>What was the process involved?</li>
</ul><p>Getting into core is really easy if a core committer starts the discussion. On Monday, Alex said, let’s do it, we said, great idea. He got Dries on board at breakfast on Wednesday, they announced the move at the Core Q&amp;A on Thursday. By then I got approval from my boss at 10gen (MongoDB) to spend my paid time on this. I also got Melissa Anderson on board by this point. I really hoped funding will happen for her as well but that didn’t happen so far. Anyone interested please get in contact.</p>
<p>This was an easy decision -- we hit a wall with the upgrade path and we did climb that wall in Drupal 7, noone wants to do that again. Here’s an (in hindsight funny) moment about it: one of my life regrets is not capturing the face Barry Jaspan made at DrupalCon Copenhagen after an extremely fruitful discussion when he realized we do need to update disabled modules. I could’ve framed that photo and sold it with a title like “Damnation” or something like that. By the way, that particular completely ad-hoc conversation around a whiteboard, cemented my (and others) conviction of the helpfulness of core conversations (which just started at DrupalCon SF the same year). We easily shortened the D7 cycle by a month in about half an hour.</p>
<p>The reason MongoDB (name of the company and database both) came on board, this is an enormous opportunity for MongoDB: they paid me to make sure Drupal 8 runs on MongoDB alone, without any SQL and I believe this to be possible since about February (provided someone writes all the drivers but many are already written, actually). Unlike upgrade, Migrate uses the same APIs as a normal Drupal 8, it is just another module like any other so if you put these two together it means that without any further work, if migrate works against an SQL database as a target it will also work for MongoDB as a target. People will be able to leave behind not just antiquated Drupal versions but also antiquated databases too :)</p>
<!-- This is where I would like to pass the mike to Melissa to talk about the process since --><!-- Last chance to send in questions using the hashtag: #MUP089 --><h2>Use Cases</h2>
<ul><li>What does the migrate process look like for sites on D6, D7, and older?</li>
</ul><p>We will ship a default UI which will be super simple: you can provide database credentials, a file path, two buttons, one to migrate configuration, one to migrate content. I will be the first to admit this UI will be an alibi as it won’t work in many, many cases. After all, upgrade didn’t work either. But what happens after a fail is crucial. Upgrade function are intertwined and just impossible to reuse and themselves not working against in many installations. If user_update_8002 fails against your database, you can’t run node_update_8013 and above (this is a real world example). Migrate is different. It will with ship reusable, mostly independent migrations but even more importantly the insides of a migration are not closely coupled. We worked very hard on this. It will ship with many, many independent plugins. So, one level, if you hacked the user table apart and because of this the user migration fails, you can still migrate nodes. On the next level, if you need to write your own user source plugin that’s all you need to do, the rest of the migration might just work or need small changes. Say, your user table doesn’t have unique emails. This obviously will fail to migrate. But the migration module ships with a deduplication plugin, so you can add a few lines to the migration entity YAML, adding that to the ‘mail’ pipeline of the user migration and be done.</p>
<p>Getting back on how this will look like. If you decide to rebuild your site in a Drupal 8 way and only migrate users, content and such without migrating configuration, you will be able to do that either via a contrib UI or drush. This is the important part, really. So the way this is going to happen for some people: install an empty Drupal 8, try to migrate configuration, tweak the configuration, migrate content. Others will rebuild the site and then pick and choose which migrations to run. Many, especially coming from Drupal 6 will code their custom migrations. Remember the user example. It won’t be very different for custom data either. You need to write a source plugin which deals with reading from your custom table, very often, this is just a simple query. Then you need to write the migration itself using this source plugin, and using the migrate provided process plugins and of course an entity destination.</p>
<p>We strive to make the whole Drupal version change as painless as possible. Instead of having a “take all or nothing” upgrade path, migrate has a simple core UI, will hopefully have a more sophisticated contrib UI, will allow minimal custom code to augment existing migrations and a little bit more custom code to create new migrations. Unlike the “No Child Left Behind” program which resulted in every child left behind, we truly believe in no Drupal site left behind: come to Drupal 8, we have cookies! (And web services and mobile UI and in place editing and deployable configuration and….)</p>
<h2>History of Migrate Module. Who has used code before me?</h2>
<p>Moshe to describe prior success stories about Economist, Examiner, Martha Stewart, Warner Music, ...</p>
<h2>Questions from Twitter</h2>
<ul><li><a href="http://twitter.com/DamienMcKenna">Damien McKenna</a><br />
How much configuration will be migrated (variables, blocks table, etc), or is it going to be data-only?</li>
<li><a href="http://twitter.com/socketwench">socketwench</a><br />
How different will the migrate framework be for developers in 8 compared to 7? Will there be a configuration migration path?</li>
<li><a href="http://twitter.com/YesCT">Cathy YesCT</a></li>
</ul><h1>MUP089 What would make it easier for the team? What do they need (aside from eventual people to do small bits of migration/tests).</h1>
<ul><li><a href="http://twitter.com/YesCT">Cathy YesCT</a></li>
</ul><h1>MUP089 For each person, what is their proudest moment so far in working on migrate in D8?</h1>
<ul><li><a href="http://twitter.com/DamienMcKenna">Damien McKenna</a></li>
</ul><h1>MUP089: While working on the D8 codebase is there any consideration for backporting changes to the D7 Migrate module?</h1>
<ul><li>
<p><a href="http://twitter.com/YesCT">Cathy YesCT</a><br />
yay! as <a href="http://twitter.com/lz411">@1z411</a> said "post partial work" #MUP089 Great way to get quick good feedback that will help people learn.</p>
</li>
<li>
<p>Where can people go to get involved?</p>
</li>
</ul><h2>NodeSquirrel Ad</h2>
<p>Have you heard of/used NodeSquirrel?<br />
Use "StartToGrow" it's a 12-month free upgrade from the Start plan to the Grow plan. So, using it means that the Grow plan will cost $5/month for the first year instead of $10. (10 GB storage on up to 5 sites).</p>
</div></div></div><section class="field field-name-field-items-mentioned field-type-link-field field-label-above view-mode-rss"><h2 class="field-label">Episode Links:&nbsp;</h2><div class="field-items"><div class="field-item even"><a href="https://drupal.org/user/33570/" target="_blank" rel="nofollow">Melissa on drupal.org</a></div><div class="field-item odd"><a href="https://twitter.com/lz411" target="_blank" rel="nofollow">Melissa on twitter</a></div><div class="field-item even"><a href="https://drupal.org/irc" target="_blank" rel="nofollow">Melissa on IRC</a></div><div class="field-item odd"><a href="http://drupal.org/user/4420" target="_blank" rel="nofollow">Mike on drupal.org</a></div><div class="field-item even"><a href="http://twitter.com/mikeryan776" target="_blank" rel="nofollow">Mike on Twitter</a></div><div class="field-item odd"><a href="http://mikeryan.name" target="_blank" rel="nofollow">Mike’s Blog</a></div><div class="field-item even"><a href="http://drupal.org/user/23" target="_blank" rel="nofollow">Moshe on drupal.org</a></div><div class="field-item odd"><a href="http://twitter.com/weitzman" target="_blank" rel="nofollow">Moshe on Twitter</a></div><div class="field-item even"><a href="http://drupal.org/user/9446" target="_blank" rel="nofollow">Chx on drupal.org</a></div><div class="field-item odd"><a href="http://twitter.com/chx" target="_blank" rel="nofollow">Chx on Twitter</a></div><div class="field-item even"><a href="https://drupal.org/node/2127611" target="_blank" rel="nofollow">IMP Documentation</a></div><div class="field-item odd"><a href="https://groups.drupal.org/imp" target="_blank" rel="nofollow">IMP</a></div><div class="field-item even"><a href="https://drupal.org/irc" target="_blank" rel="nofollow">Contribute on IRC #drupal-contribute</a></div></div></section><section class="field field-name-field-tags field-type-taxonomy-term-reference field-label-above view-mode-rss"><h2 class="field-label">Tags:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="/tags/drupal-8" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Drupal 8</a></li><li class="field-item odd"><a href="/tags/migrate" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Migrate</a></li><li class="field-item even"><a href="/tags/upgrade" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Upgrade</a></li><li class="field-item odd"><a href="/planet-drupal" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">planet-drupal</a></li></ul></section>
  </body>
</html>

