X-Mozilla-Status: 0041
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                
Date: Thu, 08 Aug 2013 11:09:54 +0000
Message-Id: <http://drupal.org/planet/rss.xml#Thu, 08 Aug 2013 11:09:54 +0000@localhost.localdomain>
From: <Drupal Planet>
MIME-Version: 1.0
Subject: comm-press | Drupal in Hamburg: Moving between Drupal 8 versions without losing (all of) your content
Content-Transfer-Encoding: 8bit
Content-Base: http://comm-press.de/en/blog/moving-between-drupal-8-versions-without-losing-all-your-content
Content-Type: text/html; charset=UTF-8

<html>
  <head>
    <title>comm-press | Drupal in Hamburg: Moving between Drupal 8 versions without losing (all of) your content</title>
    <base href="http://comm-press.de/en/blog/moving-between-drupal-8-versions-without-losing-all-your-content">
  </head>
  <body id="msgFeedSummaryBody" selected="false">
    <h2>Drupal&#039;s multiple database functionality</h2>
By John Heaven
In the past few weeks, inspired by the Contribution Sprints at Drupalcon (and the desire to contribute *something* worthwhile to the Drupal 8), I started an experimental blog on Drupal 8. It's very spartan because I have done pretty much no configuration/theming whatsover. But it works!

My idea was to test out Drupal 8 as best I could in order to contribute whatever I find to the issue queue. What I didn't really think about was that upgrading Drupal 8 to reflect the latest development version would mean a fresh install, and the loss of any content I created. I started copy-pasting some of my articles to my old blog, but it would be nice for the articles just to stay where they are without losing too much data.

I asked on Twitter whether it was just me ...

<blockquote class="twitter-tweet"><p><a href="https://twitter.com/johnheaven">@johnheaven</a> Currently d8 does not support d8-&gt;d8 updates (would be too much work atm), that's planned for the post-codefreeze time afaik</p>â€” patrickd (@patrickd_drupal) <a href="https://twitter.com/patrickd_drupal/statuses/346687341982789632">June 17, 2013</a></blockquote>
<script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
... and (unfortunately) it isn't.
<p>I experimented a little bit with PHPMyAdmin - trying to merge a couple of databases to integrate the old content into a new database - but gave up pretty quickly because I was going nowhere. What I needed was to experiment on a table-by-table basis to see which tables were breaking the installation.</p>

<h1>Using Drupal's multiple database connections to find out which tables are causing the problem</h1>

<p>Somewhere in the back of my mind, I remembered something about Drupal being able to access more than one database at a time. With a bit of research, I found out that it is possible to specify that particular tables should be read from particular databases in settings.php.</p>

<p>The <strong>short version</strong>: by getting a list of all the tables in the Drupal 8 database, I was able to configure my working, fresh Drupal 8 installation to read some tables from the old database and the rest from the new database. I initially set them all to read from the new database, before switching them over to read from the old database table by table until it broke (in which case I changed the setting back, so that it read that particular table from the new database) or my content appeared (wahey!).</p>

<h1>Here's what I did: the long version</h1>

<p>I had a working Drupal 8 installation, with my blog articles in it (origin). I wanted to get the content into the freshly installed, up-to-date Drupal 8 installation (destination).</p>

<p>Firstly, I did a mysqldump of the <em>origin</em> database so I was working on a copy and not the original database. I called this database origin. The database of the <em>destination</em> Drupal 8 installation was called destination. So the database settings in settings.php for the <em>destination</em> installation were:</p>

<div class="codeblock"><code>$databases[&#039;default&#039;][&#039;default&#039;] = array (<br />&nbsp; &#039;database&#039; =&gt; &#039;destination&#039;,<br />&nbsp; &#039;username&#039; =&gt; &#039;d8&#039;,<br />&nbsp; &#039;password&#039; =&gt; &#039;password_for_db_user&#039;,<br />&nbsp; &#039;host&#039; =&gt; &#039;localhost&#039;,<br />&nbsp; &#039;port&#039; =&gt; &#039;&#039;,<br />&nbsp; &#039;namespace&#039; =&gt; &#039;Drupal\\Core\\Database\\Driver\\mysql&#039;,<br />&nbsp; &#039;driver&#039; =&gt; &#039;mysql&#039;,<br />&nbsp; &#039;prefix&#039; =&gt; &#039;&#039;<br />);</code></div>

<p>All working fine - but no content!</p>

<p>The 'prefix' element within the $databases [default][default] array can itself be made into an array that specifies which database specific tables should be read from.</p>

<p>So I got the name of every single database table and copied them into settings.php, as follows, so that I could specify which database each of them should read from (to make things easier, I gave all the rights on both databases to the same user) -</p>

<div class="codeblock"><code>$databases[&#039;default&#039;][&#039;default&#039;] = array (<br />&nbsp; &#039;database&#039; =&gt; &#039;destination&#039;,<br />&nbsp; &#039;username&#039; =&gt; &#039;d8&#039;,<br />&nbsp; &#039;password&#039; =&gt; &#039;password_for_db_user&#039;,<br />&nbsp; &#039;host&#039; =&gt; &#039;localhost&#039;,<br />&nbsp; &#039;port&#039; =&gt; &#039;&#039;,<br />&nbsp; &#039;namespace&#039; =&gt; &#039;Drupal\\Core\\Database\\Driver\\mysql&#039;,<br />&nbsp; &#039;driver&#039; =&gt; &#039;mysql&#039;,<br />&nbsp; &#039;prefix&#039; =&gt; array (<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;default&#039; =&gt; &#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;batch&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_block&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_bootstrap&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_config&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_field&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_filter&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_menu&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_tags&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_toolbar&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_views_info&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;comment&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;config_snapshot&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;custom_block&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;custom_block_revision&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_block_body&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_body&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_comment_body&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_field_image&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_field_tags&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_user_picture&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_block_body&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_body&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_comment_body&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_field_image&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_field_tags&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_user_picture&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;file_managed&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;file_usage&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;flood&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;history&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;key_value&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;key_value_expire&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;menu_links&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;menu_router&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_access&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_comment_statistics&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_field_data&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_field_revision&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_type&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;queue&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;rdf_mapping&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;role_permission&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;router&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_dataset&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_index&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_node_links&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_total&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;semaphore&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;sequences&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;sessions&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;shortcut_set_users&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;taxonomy_index&#039; =&gt; &#039;destination.&#039;, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;taxonomy_term_data&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;taxonomy_term_hierarchy&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;url_alias&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;users&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;users_data&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;users_roles&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;variable&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;watchdog&#039; =&gt; &#039;destination.&#039;<br />  )<br />);</code></div>

<p>IMPORTANT: Don't forget the full-stops (or periods) after the database name!!!</p>

<p>As you can imagine, at the moment this does nothing different from the original settings.php because all of the tables are being read from the destination database. However, I then went through the tables and did the following:</p>

<ul>
<li><p>Switched it to read from the origin database</p></li>
<li><p>Saved settings.php</p></li>
<li><p>Refreshed the browser to see whether it still worked.</p></li>
</ul>

<p>After carrying out this process, I had most of the tables reading from the origin database and it worked quite well - with the obvious exception of having lost any configuration and not reading and resources from the filesystem (images) because I hadn't yet copied them across.</p>

<p>In a second pass, I tried turning as many of the tables back to reading from the destination database without breaking the content in a similar process to the one described above. (I don't think this step was really necessary, but I assumed it was better to read from the database created with the newer Drupal 8 version if possible). After writing <a href="http://d8.johnheaven.eu/node/10">a blog post</a> in the evening, I discovered that I had broken/lost the tags, and was able to localise which tables were responsible. In the end, I copied and pasted the tags across - but with more research, I think I should have been able to rescue them.</p>

<p>This is what my $database variable in my settings.php looks like at the moment - including a few annotations (the meaning of which even I have forgotten):</p>

<div class="codeblock"><code>$databases[&#039;default&#039;][&#039;default&#039;] = array (<br />&nbsp; &#039;database&#039; =&gt; &#039;destination&#039;,<br />&nbsp; &#039;username&#039; =&gt; &#039;d8&#039;,<br />&nbsp; &#039;password&#039; =&gt; &#039;password_for_db_user&#039;,<br />&nbsp; &#039;host&#039; =&gt; &#039;localhost&#039;,<br />&nbsp; &#039;port&#039; =&gt; &#039;&#039;,<br />&nbsp; &#039;namespace&#039; =&gt; &#039;Drupal\\Core\\Database\\Driver\\mysql&#039;,<br />&nbsp; &#039;driver&#039; =&gt; &#039;mysql&#039;,<br />&nbsp; &#039;prefix&#039; =&gt; array (<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;default&#039; =&gt; &#039;&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;batch&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_block&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_bootstrap&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_config&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_field&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_filter&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_menu&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_tags&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_toolbar&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;cache_views_info&#039; =&gt; &#039;destination.&#039;, // ****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;comment&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;config_snapshot&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;custom_block&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;custom_block_revision&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_block_body&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_body&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_comment_body&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_field_image&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_field_tags&#039; =&gt; &#039;destination.&#039;, // Otherwise tags don&#039;t work<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_data_user_picture&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_block_body&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_body&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_comment_body&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_field_image&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_field_tags&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;field_revision_user_picture&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;file_managed&#039; =&gt; &#039;origin.&#039;, // Pictures appear (if only placeholders)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;file_usage&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;flood&#039; =&gt; &#039;origin.&#039;, // Loads of property not defined errors<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;history&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;key_value&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;key_value_expire&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;menu_links&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;menu_router&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_access&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_comment_statistics&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_field_data&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_field_revision&#039; =&gt; &#039;origin.&#039;, // ++++<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;node_type&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;queue&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;rdf_mapping&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;role_permission&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;router&#039; =&gt; &#039;destination.&#039;, // *****<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_dataset&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_index&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_node_links&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;search_total&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;semaphore&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;sequences&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;sessions&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;shortcut_set_users&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;taxonomy_index&#039; =&gt; &#039;destination.&#039;, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;taxonomy_term_data&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;taxonomy_term_hierarchy&#039; =&gt; &#039;destination.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;url_alias&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;users&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;users_data&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;users_roles&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;variable&#039; =&gt; &#039;origin.&#039;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#039;watchdog&#039; =&gt; &#039;origin.&#039;<br /> )<br />);</code></div>

<p>So what I've done is given myself a way of identifying which tables are responsible for busting my fresh installation. I can then - hopefully - merge the two databases, taking my content across to the new installation and trash the ones that are causing the problems.</p>

<p>Now I need to find out how to merge those databases. Presumably there's a way of doing it in PHPMyAdmin?</p>
  </body>
</html>

