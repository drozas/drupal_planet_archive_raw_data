X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                
Date: Wed, 04 Dec 2013 14:39:29 +0000
Message-Id: <http://drupal.org/planet/rss.xml#Wed, 04 Dec 2013 14:39:29 +0000@localhost.localdomain>
From: <Drupal Planet>
MIME-Version: 1.0
Subject: Propeople Blog: Views Taxonomy Links as Exposed Filter with Ajax enabled for Drupal 7
Content-Transfer-Encoding: 8bit
Content-Base: http://wearepropeople.com/blog/views-taxonomy-links-as-exposed-filter-with-ajax-enabled-for-drupal-7
Content-Type: text/html; charset=UTF-8

<html>
  <head>
    <title>Propeople Blog: Views Taxonomy Links as Exposed Filter with Ajax enabled for Drupal 7</title>
    <base href="http://wearepropeople.com/blog/views-taxonomy-links-as-exposed-filter-with-ajax-enabled-for-drupal-7">
  </head>
  <body id="msgFeedSummaryBody" selected="false">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>It is a very common usecase to display a list of nodes on a page, and one or more blocks that <span style="line-height: 1.538em;">give you the ability to filter by tags or categories. You might encounter such a use case on a "blog posts" </span><span style="line-height: 1.538em;">or "event list" page. And it would be nice if the filtering wouldn't require a full page reload, </span><span style="line-height: 1.538em;">but rather just inquire the server for new information, and update the list of content via AJAX.</span></p><p><img typeof="foaf:Image" src="http://d3gda9raw7t781.cloudfront.net/sites/default/files/just_categories2.png" alt="" /></p><p><span style="line-height: 1.538em;">Fortunately creating a list of posts is easy with the Views Module, and you can also make an exposed form block </span><span style="line-height: 1.538em;">which will contain the exposed filters for tags and categories.</span></p><p><span style="line-height: 1.538em;">A problem arises when just the Views module is used: it only has support for displaying taxonomy terms (we use them </span><span style="line-height: 1.538em;">for tags and categories) as a select list. A module that helps us solve this is Better Exposed Filters. It has support </span><span style="line-height: 1.538em;">for displaying taxonomy terms as a select list, checkoxes/radio buttons, link list, and hidden values.</span></p><p><span style="line-height: 1.538em;">First a content type "Blog" should be created with two taxonomy fields for tags and categories, and any other </span><span style="line-height: 1.538em;">relevant fields. The fields can be either term or entity references.</span></p><p><img typeof="foaf:Image" src="http://d3gda9raw7t781.cloudfront.net/sites/default/files/blog_fields.png" alt="" /></p><p> </p><p>The next step is creating a view that displays blog items. After configuring all the relevant blog settings, the two <span style="line-height: 1.538em;">taxonomy fields should be added as filters.</span><img alt="" class="media-element file-default" data-file_info="%7B%22fid%22:%223250%22,%22view_mode%22:%22default%22,%22fields%22:%7B%22format%22:%22default%22,%22field_file_image_alt_text%5Bund%5D%5B0%5D%5Bvalue%5D%22:%22%22,%22field_file_image_title_text%5Bund%5D%5B0%5D%5Bvalue%5D%22:%22%22,%22field_tags%5Bund%5D%22:%22%22%7D,%22type%22:%22media%22%7D" src="http://d3gda9raw7t781.cloudfront.net/sites/default/files/filter_list.png" style="line-height: 1.538em;" typeof="foaf:Image" /></p><p>And afterwards, they should be set as exposed.</p><p><img typeof="foaf:Image" src="http://d3gda9raw7t781.cloudfront.net/sites/default/files/filter_settings_0.png" alt="" /></p><p> </p><p>Once that is done, assuming the Better Exposed Filters module is installed, the exposed form type should be changed to <span style="line-height: 1.538em;">BEF, and the form can also be exposed as a block.</span></p><p><img typeof="foaf:Image" src="http://d3gda9raw7t781.cloudfront.net/sites/default/files/bef.png" alt="" /></p><p> </p><p>The last step is changing the BEF settings for the taxonomy fields to be displayed as links.</p><p><img typeof="foaf:Image" src="http://d3gda9raw7t781.cloudfront.net/sites/default/files/bef_settings.png" alt="" /></p><p> </p><p>Once the view is saved and previewed, the list of blog items should be displayed, the exposed form should appear with <span style="line-height: 1.538em;">two sets of links for tags and categories, which once clicked will filter the results to display only posts with the </span><span style="line-height: 1.538em;">respective tags or categories.</span></p><p><span style="line-height: 1.538em;">Unfortunately, even if "Use Ajax" was ticked, the filtering will not work via Ajax. This is a known open issue of </span><span style="line-height: 1.538em;">Better Exposed Filters at <a href="https://drupal.org/node/1268150">https://drupal.org/node/1268150</a>, that still isn't fixed, with the most relevant patch </span><span style="line-height: 1.538em;">being in comment #81 against the DEV version of BEF.</span></p><p><span style="line-height: 1.538em;">Because using the DEV version was not an acceptable solution for the project I was working on, I've rewritten a patch </span><span style="line-height: 1.538em;">based on #81 against the stable version of the BEF module 7.x-3.0-beta3, which also included some javascript fixes.</span></p><p><span style="line-height: 1.538em;">The patch can be found at <a href="https://drupal.org/files/issues/filter_links_ajax.patch">https://drupal.org/files/issues/filter_links_ajax.patch</a>, and also in the issue queue at </span><span style="line-height: 1.538em;"><a href="https://drupal.org/node/1268150#comment-8210373">https://drupal.org/node/1268150#comment-8210373</a>.</span></p><p><span style="line-height: 1.538em;">Once the patch is applied, clicking on the taxonomy links should filter the view via AJAX properly.</span></p><div> </div></div></div></div><div class="form-item form-type-item">
  <label>Language </label>
 English
</div>
<div id="comment-wrapper-nid-1380"></div><div class="field field-name-field-tags field-type-taxonomy-term-reference field-label-above"><div class="field-label">Tags:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="/tags/drupal" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Drupal</a></div></div></div><div class="field field-name-field-drupal-planet field-type-taxonomy-term-reference field-label-above"><div class="field-label">Check this option to include this post in Planet Drupal aggregator:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="/drupal/planet" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">planet</a></div></div></div>
  </body>
</html>

